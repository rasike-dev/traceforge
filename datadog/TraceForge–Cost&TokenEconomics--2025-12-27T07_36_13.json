{"title":"TraceForge – Cost & Token Economics","description":null,"widgets":[{"id":8456775992764950,"definition":{"title":"LLM Token Usage per Request (avg)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:traceforge.llm.total_tokens{env:dev,service:traceforge-api}"}],"formulas":[{"formula":"query1","number_format":{"unit":{"type":"custom_unit_label","label":"tokens"}}}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5736315742617404,"definition":{"title":"Prompt vs Completion Tokens (avg)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:traceforge.llm.prompt_tokens{env:dev,service:traceforge-api}"},{"data_source":"metrics","name":"query2","query":"avg:traceforge.llm.completion_tokens{env:dev,service:traceforge-api}"}],"formulas":[{"formula":"query1","number_format":{"unit":{"type":"custom_unit_label","label":"tokens"}}},{"formula":"query2","number_format":{"unit":{"type":"custom_unit_label","label":"tokens"}}}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":3458209650038464,"definition":{"title":"Estimated LLM Cost per Request (P95)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"p95:traceforge.llm.cost_usd{*}"}],"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}},"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":6805884348654338,"definition":{"title":"Estimated LLM Cost by Model","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:traceforge.llm.cost_usd_estimate{*} by {llm.model}"}],"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}},"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","order_reverse":false,"line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":8257030988163274,"definition":{"title":"LLM Token Spike Events","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"count:traceforge.llm.token_spike{env:dev,service:traceforge-api}"}],"formulas":[{"number_format":{"unit":{"type":"custom_unit_label","label":"count"}},"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"min":"0"}},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":7131754807207147,"definition":{"title":"Avg LLM Cost per Request (USD)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:traceforge.llm.cost.usd{*}.as_count()"},{"data_source":"metrics","name":"query2","query":"sum:traceforge.request.count{*}.as_count()"}],"formulas":[{"alias":"Avg Cost per Request (USD)","number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}},"formula":"query1 / query2"}],"style":{"palette":"blue","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":" Cost Warning ($0.02) ","value":"y = 0.02","display_type":"warning dashed"},{"label":" Cost Alert ($0.05) ","value":"y = 0.05","display_type":"error solid"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":8013052236181719,"definition":{"title":"Token Usage vs Request Latency","title_size":"16","title_align":"left","type":"scatterplot","requests":{"table":{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:traceforge.llm.tokens.input{*}.as_count()","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"sum:traceforge.llm.tokens.output{*}.as_count()","aggregator":"avg"},{"data_source":"metrics","name":"query3","query":"sum:traceforge.request.latency_ms{*}.as_count()","aggregator":"avg"}],"formulas":[{"dimension":"y","alias":"latency_ms","formula":"query3"},{"alias":"total_tokens","dimension":"x","formula":"(query1 + query2)"}]}},"xaxis":{"scale":"linear","include_zero":true,"min":"auto","max":"auto"},"yaxis":{"scale":"linear","include_zero":true,"min":"auto","max":"auto"},"color_by_groups":[]},"layout":{"x":0,"y":4,"width":4,"height":2}}],"template_variables":[],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed","pause_auto_refresh":false}